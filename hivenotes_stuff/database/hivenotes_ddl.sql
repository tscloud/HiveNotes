/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 12.0 		*/
/*  Created On : 14-Aug-2015 11:16:09 				*/
/*  DBMS       : SQLite 								*/
/* ---------------------------------------------------- */

/* Drop Tables */

DROP TABLE IF EXISTS 'Apiary'
;

DROP TABLE IF EXISTS 'Hive'
;

DROP TABLE IF EXISTS 'Note'
;

DROP TABLE IF EXISTS 'Picture'
;

DROP TABLE IF EXISTS 'Notification'
;

DROP TABLE IF EXISTS 'Profile'
;

DROP TABLE IF EXISTS 'LogEntry'
;

/* Create Tables with Primary and Foreign Keys, Check and Unique Constraints */

CREATE TABLE 'Apiary'
(
	'_ID' INTEGER NOT NULL,
	'_TABLE_ID' INTEGER NOT NULL DEFAULT 0,
	'PROFILE' INTEGER NOT NULL,
	'PROFILE_TABLE' INTEGER NOT NULL,
	'NAME' TEXT,
	CONSTRAINT 'PK_Apiary' PRIMARY KEY ('_ID','_TABLE_ID'),
	CONSTRAINT 'FK_Apiary_Profile' FOREIGN KEY ('PROFILE','PROFILE_TABLE') REFERENCES 'Profile' ('_ID','_TABLE_ID') ON DELETE No Action ON UPDATE No Action
)
;

CREATE TABLE 'Hive'
(
	'_ID' INTEGER NOT NULL,
	'_TABLE_ID' INTEGER NOT NULL DEFAULT 2,
	'BEEHOUSE' INTEGER NOT NULL,
	'PARENT' INTEGER NOT NULL,
	'NAME' TEXT,
	CONSTRAINT 'PK_Hive' PRIMARY KEY ('_ID','_TABLE_ID'),
	CONSTRAINT 'FK_Hive_Apiary' FOREIGN KEY ('BEEHOUSE','PARENT') REFERENCES 'Apiary' ('_ID','_TABLE_ID') ON DELETE Cascade ON UPDATE Cascade
)
;

CREATE TABLE 'Note'
(
	'_ID' INTEGER NOT NULL,
	'_TABLE_ID' INTEGER NOT NULL DEFAULT 4,
	'BEEHOUSE' INTEGER NOT NULL,
	'PARENT' INTEGER NOT NULL,
	'TYPE' TEXT,
	CONSTRAINT 'PK_Note' PRIMARY KEY ('_ID','_TABLE_ID'),
	CONSTRAINT 'FK_Note_Apiary' FOREIGN KEY ('BEEHOUSE','PARENT') REFERENCES 'Apiary' ('_ID','_TABLE_ID') ON DELETE Cascade ON UPDATE Cascade,
	CONSTRAINT 'FK_Note_Hive' FOREIGN KEY ('BEEHOUSE','PARENT') REFERENCES 'Hive' ('_ID','_TABLE_ID') ON DELETE Cascade ON UPDATE Cascade
)
;

CREATE TABLE 'Picture'
(
	'_ID' INTEGER NOT NULL,
	'_TABLE_ID' INTEGER NOT NULL DEFAULT 3,
	'BEEHOUSE' INTEGER NOT NULL,
	'PARENT' INTEGER NOT NULL,
	'IMAGE_URI' TEXT,
	CONSTRAINT 'PK_Picture' PRIMARY KEY ('_ID','_TABLE_ID'),
	CONSTRAINT 'FK_Picture_Apiary' FOREIGN KEY ('BEEHOUSE','PARENT') REFERENCES 'Apiary' ('_ID','_TABLE_ID') ON DELETE Cascade ON UPDATE Cascade,
	CONSTRAINT 'FK_Picture_Hive' FOREIGN KEY ('BEEHOUSE','PARENT') REFERENCES 'Hive' ('_ID','_TABLE_ID') ON DELETE Cascade ON UPDATE Cascade
)
;

CREATE TABLE 'Notification'
(
	'_ID' INTEGER NOT NULL,
	'_TABLE_ID' INTEGER NOT NULL DEFAULT 1,
	'BEEHOUSE' INTEGER NOT NULL,
	'PARENT' INTEGER NOT NULL,
	'ALARM_URI' TEXT,
	CONSTRAINT 'PK_Notification' PRIMARY KEY ('_ID','_TABLE_ID'),
	CONSTRAINT 'FK_Notification_Hive' FOREIGN KEY ('BEEHOUSE','PARENT') REFERENCES 'Hive' ('_ID','_TABLE_ID') ON DELETE Cascade ON UPDATE Cascade
)
;

CREATE TABLE 'Profile'
(
	'_ID' INTEGER NOT NULL,
	'_TABLE_ID' INTEGER NOT NULL,
	'NAME' TEXT,
	'EMAIL' TEXT,
	CONSTRAINT 'PK_Profile' PRIMARY KEY ('_ID','_TABLE_ID')
)
;

CREATE TABLE 'LogEntry'
(
	'_ID' INTEGER NOT NULL,
	'_TABLE_ID' INTEGER NOT NULL,
	'BEEHOUSE' INTEGER NOT NULL,
	'PARENT' INTEGER NOT NULL,
	'VISIT_DATE' TEXT,
	CONSTRAINT 'PK_Table1' PRIMARY KEY ('_ID','_TABLE_ID'),
	CONSTRAINT 'FK_LogEntry_Hive' FOREIGN KEY ('BEEHOUSE','PARENT') REFERENCES 'Hive' ('_ID','_TABLE_ID') ON DELETE Cascade ON UPDATE Cascade
)
;
