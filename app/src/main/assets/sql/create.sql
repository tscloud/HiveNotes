/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 12.0 		*/
/*  Created On : 18-Aug-2015 12:54:31 					*/
/*  DBMS       : SQLite 								*/
/* ---------------------------------------------------- */

/* Drop Tables */

DROP TABLE IF EXISTS 'Apiary'
;

DROP TABLE IF EXISTS 'Hive'
;

DROP TABLE IF EXISTS 'Note'
;

DROP TABLE IF EXISTS 'Picture'
;

DROP TABLE IF EXISTS 'Notification'
;

DROP TABLE IF EXISTS 'Profile'
;

DROP TABLE IF EXISTS 'LogEntry'
;

/* Create Tables with Primary and Foreign Keys, Check and Unique Constraints */

CREATE TABLE 'Profile'
(
	'_ID' INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	'NAME' TEXT,
	'EMAIL' TEXT
)
;

CREATE TABLE 'Apiary'
(
	'_ID' INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	'PROFILE' INTEGER NOT NULL,
	'NAME' TEXT,
	'POSTAL_CODE' TEXT,
	'LATITUDE' REAL,
	'LONGITUDE' REAL,
	CONSTRAINT 'FK_Apiary_Profile' FOREIGN KEY ('PROFILE') REFERENCES 'Profile' ('_ID') ON DELETE No Action ON UPDATE Cascade
)
;

CREATE TABLE 'Hive'
(
	'_ID' INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	'APIARY' INTEGER NOT NULL,
	'NAME' TEXT,
	'SPECIES' TEXT,
	'FOUNDATION_TYPE' TEXT,
	'NOTE' TEXT,
	CONSTRAINT 'FK_Hive_Apiary' FOREIGN KEY ('APIARY') REFERENCES 'Apiary' ('_ID') ON DELETE Cascade ON UPDATE Cascade
)
;

CREATE TABLE 'Note'
(
	'_ID' INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	'APIARY' INTEGER,
	'HIVE' INTEGER,
	'TYPE' TEXT,
	'NOTE_TEXT' TEXT,
	CONSTRAINT 'FK_Note_Apiary' FOREIGN KEY ('APIARY') REFERENCES 'Apiary' ('_ID') ON DELETE Cascade ON UPDATE Cascade,
	CONSTRAINT 'FK_Note_Hive' FOREIGN KEY ('HIVE') REFERENCES 'Hive' ('_ID') ON DELETE Cascade ON UPDATE Cascade
)
;

CREATE TABLE 'Picture'
(
	'_ID' INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	'APIARY' INTEGER,
	'HIVE' INTEGER,
	'IMAGE_URI' TEXT,
	CONSTRAINT 'FK_Picture_Apiary' FOREIGN KEY ('APIARY') REFERENCES 'Apiary' ('_ID') ON DELETE Cascade ON UPDATE Cascade,
	CONSTRAINT 'FK_Picture_Hive' FOREIGN KEY ('HIVE') REFERENCES 'Hive' ('_ID') ON DELETE Cascade ON UPDATE Cascade
)
;

CREATE TABLE 'Notification'
(
	'_ID' INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	'HIVE' INTEGER NOT NULL,
	'ALARM_URI' TEXT,
	CONSTRAINT 'FK_Notification_Hive' FOREIGN KEY ('HIVE') REFERENCES 'Hive' ('_ID') ON DELETE Cascade ON UPDATE Cascade
)
;

CREATE TABLE 'Weather'
(
	'_ID' INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	'APIARY' INTEGER,
	'SNAPSHOT_DATE' TEXT,
	'TEMPERATURE' TEXT,
	'RAINFALL' TEXT,
	'POLLEN_COUNT' TEXT,
	'POLLUTION' TEXT,
	CONSTRAINT 'FK_Weather_Apiary' FOREIGN KEY ('APIARY') REFERENCES 'Apiary' ('_ID') ON DELETE Cascade ON UPDATE Cascade
)
;

CREATE TABLE 'LogEntryGeneral'
(
	'_ID' INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	'HIVE' INTEGER NOT NULL,
	'VISIT_DATE' TEXT,
	'POPULATION' TEXT,
	'TEMPERAMENT' TEXT,
	'PESTS_DISEASE' TEXT,
	'BROOD_FRAMES' INTEGER,
	'BROOD_PATTERN' TEXT,
	'QUEEN' TEXT,
	'HONEY_STORES' TEXT,
	'POLLEN_STORES' TEXT,
	CONSTRAINT 'FK_LogEntryGeneral_Hive' FOREIGN KEY ('HIVE') REFERENCES 'Hive' ('_ID') ON DELETE Cascade ON UPDATE Cascade
)
;

CREATE TABLE 'LogEntryProductivity'
(
	'_ID' INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	'HIVE' INTEGER NOT NULL,
	'VISIT_DATE' TEXT,
	'HONEY_ADD_SUPERS' TEXT,
	'HONEY_REMOVE_SUPERS' TEXT,
	'EXTRACTED_HONEY' REAL,
	'ADD_POLLEN_TRAP' INTEGER,
	'REMOVE_POLLEN_TRAP' INTEGER,
	'POLLEN_COLLECTED' REAL,
	'BEESWAX_COLLECTED' REAL,
	CONSTRAINT 'FK_LogEntryProductivity_Hive' FOREIGN KEY ('HIVE') REFERENCES 'Hive' ('_ID') ON DELETE Cascade ON UPDATE Cascade
)
;

CREATE TABLE 'LogEntryPestMgmt'
(
	'_ID' INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	'HIVE' INTEGER NOT NULL,
	'VISIT_DATE' TEXT,
	'DRONE_CELL_FNDN' INTEGER,
	'DRONE_CELL_FNDN_RMNDR' INTEGER,
	'SMALL_HIVE_BEETLE_TRAP' INTEGER,
	'MITES_TRTMNT' INTEGER,
	'MITES_TRTMNT_TYPE' TEXT,
	'MITES_TRTMNT_RMNDR' INTEGER,
	'SCREENED_BOTTOM_BOARD' INTEGER,
	'OTHER' INTEGER,
	'OTHER_TYPE' TEXT,
	CONSTRAINT 'FK_LogEntryPestMgmt_Hive' FOREIGN KEY ('HIVE') REFERENCES 'Hive' ('_ID') ON DELETE Cascade ON UPDATE Cascade
)
;

CREATE TABLE 'LogEntryFeeding'
(
	'_ID' INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	'HIVE' INTEGER NOT NULL,
	'VISIT_DATE' TEXT,
	'ONE_ONE_SUGAR_WATER' INTEGER,
	'TWO_ONE_SUGAR_WATER' INTEGER,
	'POLLEN_PATTY' INTEGER,
	'OTHER' INTEGER,
	'OTHER_TYPE' TEXT,
	CONSTRAINT 'FK_LogEntryFeeding_Hive' FOREIGN KEY ('HIVE') REFERENCES 'Hive' ('_ID') ON DELETE Cascade ON UPDATE Cascade
)
;

CREATE TABLE 'LogEntryOther'
(
	'_ID' INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	'HIVE' INTEGER NOT NULL,
	'VISIT_DATE' TEXT,
	'REQUEEN' TEXT,
	'REQUEEN_RMNDR' INTEGER,
	'SWARM_RMNDR' INTEGER,
	'SPLIT_HIVE_RMNDR' INTEGER,
	CONSTRAINT 'FK_LogEntryOther_Hive' FOREIGN KEY ('HIVE') REFERENCES 'Hive' ('_ID') ON DELETE Cascade ON UPDATE Cascade
)
;
